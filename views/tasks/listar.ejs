<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <title>Minhas Tarefas</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  </head>
  <body class="bg-gray-900 text-white">
    <div class="min-h-screen flex flex-col justify-center items-center px-4">
      <h2 class="text-4xl font-extrabold text-indigo-400 mb-10 drop-shadow-lg">
        Minhas Tarefas
      </h2>

      <div class="bg-gray-800 rounded-2xl shadow-2xl p-8 w-full max-w-3xl transition-all duration-300 hover:scale-[1.01]">
        <div class="flex justify-between mb-6">
          <a
            href="/tasks/new"
            class="bg-indigo-600 hover:bg-indigo-700 text-white font-semibold rounded-md px-4 py-2 transition"
          >
            Nova Tarefa
          </a>
          <a
            href="/logout"
            class="text-red-400 font-semibold hover:underline transition"
          >
            Sair
          </a>
        </div>

        <ul class="flex flex-col gap-4">
          <% tasks.forEach(function(task) { %>
          <li
            class="border border-gray-700 rounded-lg px-4 py-3 flex flex-col md:flex-row md:items-center justify-between bg-gray-700"
          >
            <div>
              <strong class="text-lg text-indigo-300"><%= task.title %></strong>
              <span class="ml-2 text-gray-300"><%= task.description %></span>
              <% if (task.completed) { %>
              <span class="ml-2 text-green-400 font-semibold">[Completada]</span>
              <% } %>
            </div>
            <div class="flex gap-2 mt-2 md:mt-0">
              <% if (!task.completed) { %>
              <form action="/tasks/complete/<%= task.id %>" method="POST">
                <button
                  type="submit"
                  class="bg-green-600 hover:bg-green-700 text-white rounded-md px-3 py-1 font-semibold transition"
                >
                  Completar
                </button>
              </form>
              <% } %>
              <a
                href="/tasks/edit/<%= task.id %>"
                class="bg-blue-600 hover:bg-blue-700 text-white rounded-md px-3 py-1 font-semibold transition"
              >
                Editar
              </a>
              <form action="/tasks/delete/<%= task.id %>" method="POST">
                <button
                  type="submit"
                  class="bg-red-600 hover:bg-red-700 text-white rounded-md px-3 py-1 font-semibold transition"
                >
                  Excluir
                </button>
              </form>
            </div>
          </li>
          <% }) %>
        </ul>
      </div>
    </div>
  </body>
</html>
